{% extends "base.html" %}
{% load tags_extra %}
{% load widget_tweaks %}
{% load staticfiles %}
    <title>Sortable Table</title>
    {% block script %}
        <script src="{% static 'infoGatherer/js/tablesorter.min.js' %}"></script>
        {% if display_rows and display %}
            <script type="text/javascript" datamy={{display_rows}} display={{display}} src="{% static 'infoGatherer/js/audit_log.js' %}"></script>
        {% else %}
            <script type="text/javascript" datamy={{display_rows}} src="{% static 'infoGatherer/js/audit_log.js' %}"></script>
        {% endif %}
    {% endblock script %}
    {% block link %}
        <link rel="stylesheet" href="{% static 'infoGatherer/css/audit_log.css' %}">
    {% endblock link %}


{% block body %}

<div class=" container">
    <h2>Audit Log</h2>

    <ul class="nav nav-tabs">
        <li class="active"><a href="#patient" id="patienthref" data-target="#patient" data-toggle="tab"><strong>Patient</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;patient=1" id="patienthrefhidden" ><strong>hiddenPatient</strong></a></button>
        <li><a href="#payer" id="payerhref" data-target="#payer" data-toggle="tab"><strong>Payer</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;payer=1" id="payerhrefhidden" ><strong>hiddenPayer</strong></a></button>
        <li><a href="#insurance" id="insurancehref" data-target="#insurance" data-toggle="tab"><strong>Insurance</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;insurance=1" id="insurancehrefhidden" ><strong>hiddenInsurance</strong></a></button>
        <li><a href="#provider" id="providerhref" data-target="#provider" data-toggle="tab"><strong>Provider</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;provider=1" id="providerhrefhidden" ><strong>hiddenProvider</strong></a></button>
        <li><a href="#rp" id="rphref" data-target="#rp" data-toggle="tab"><strong>Referring Provider</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;rp=1" id="rphrefhidden" ><strong>hiddenRp</strong></a></button>
        <li><a href="#cpt" id="cpthref" data-target="#cpt" data-toggle="tab"><strong>CPT</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;cpt=1" id="cpthrefhidden" ><strong>hiddenCpt</strong></a></button>
        <li><a href="#dx" id="dxhref" data-target="#dx" data-toggle="tab"><strong>DX</strong></a></li>
        <button style="display:none"><a href="?num=10&amp;dx=1" id="dxhrefhidden" ><strong>hiddenDx</strong></a></button>
    </ul>
    <p></p><p></p>

    <div class="tab-content">
        <!-- Patient Information -->
        <div id="patient" class="tab-pane fade in active">
            <!-- <strong>Modified</strong> -->
<!--             <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;patient=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;patient=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;patient=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;patient=1">100</a></li>
                </ul>
            </span> -->

            <div class="btn-group ">
                <button type="button" class="btn btn-primary dropButton" >Modified</button>
                <button type="button" class="btn btn-primary dropdown-toggle dropButton2" data-toggle="dropdown">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="?num_m=5&amp;num_c={{display_rows_c}}&amp;num_d={{display_rows_d}}&amp;patient=1">5</a></li>
                    <li><a href="?num_m=10&amp;num_c={{display_rows_c}}&amp;num_d={{display_rows_d}}&amp;patient=1">10 (default)</a></li>
                    <li><a href="?num_m=25&amp;num_c={{display_rows_c}}&amp;num_d={{display_rows_d}}&amp;patient=1">25</a></li>
                    <li><a href="?num_m=all&amp;num_c={{display_rows_c}}&amp;num_d={{display_rows_d}}&amp;patient=1">All</a></li>
                </ul>
            </div>

            <p></p>
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>

                    </tr>
                </thead>
                <tbody>
                        {% for ele in pat_mod.modified %}
                            {% if forloop.counter0|lessThan:display_rows_m %}
                    	    	<tr>
                        			<td>{{ forloop.counter }}</td>
                    				<td>{{ele.history_date}}</td>
                                    <td>{{ele.first_name}}</td>
                                    <td>{{ele.last_name}}</td>
                                    <td>{{ele.change}}</td>
                                    <td>{{ele.oldvalue}}</td>
                                    <td>{{ele.newvalue}}</td>
                                    <td>{{ele.history_id}}</td>
                                    <td>{{ele.history_user_id}}</td>
                        		</tr>
                            {% endif %}
                        {% endfor %}
                </tbody>
            </table>
            
        
            <p></p>
            <div class="btn-group ">
                <button type="button" class="btn btn-success dropButton" >Created</button>
                <button type="button" class="btn btn-success dropdown-toggle dropButton2" data-toggle="dropdown">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c=5&amp;num_d={{display_rows_d}}&amp;patient=1">5</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c=10&amp;num_d={{display_rows_d}}&amp;patient=1">10 (default)</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c=25&amp;num_d={{display_rows_d}}&amp;patient=1">25</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c=all&amp;num_d={{display_rows_d}}&amp;patient=1">All</a></li>
                </ul>
            </div>
            <p></p> 
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>History id</th>
                        <th>Who changed?</th>

                    </tr>
                </thead>
                <tbody>
                        {% for ele in pat_mod.created %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.first_name}}</td>
                                <td>{{ele.last_name}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                            </tr>
                        {% endfor %}
                </tbody>
            </table>


            <div class="btn-group ">
                <button type="button" class="btn btn-danger dropButton" >Deleted</button>
                <button type="button" class="btn btn-danger dropdown-toggle dropButton2" data-toggle="dropdown">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c={{display_rows_c}}&amp;num_d=5&amp;patient=1">5</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c={{display_rows_c}}&amp;num_d=10&amp;patient=1">10 (default)</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c={{display_rows_c}}&amp;num_d=25&amp;patient=1">25</a></li>
                    <li><a href="?num_m={{display_rows_m}}&amp;num_c={{display_rows_c}}&amp;num_d=all&amp;patient=1">All</a></li>
                </ul>
            </div>
            <P></P>
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>History id</th>
                        <th>Who changed?</th>

                    </tr>
                </thead>
                <tbody>
                        {% for ele in pat_mod.deleted %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.first_name}}</td>
                                <td>{{ele.last_name}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                            </tr>
                        {% endfor %}
                </tbody>
            </table>
            <p></p>  

        </div>
        <!-- Payer Information -->
        <div id="payer" class="tab-pane fade">
            
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>Name</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in payer_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.name}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %}
                </tbody>
            </table>




            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;payer=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;payer=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;payer=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;payer=1">100</a></li>
                </ul>
            </span>
        </div>

        <!-- Insurance Information -->
        <div id="insurance" class="tab-pane fade">
            <table  class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>Patient Name</th>
                        <th>Payer Name</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in insurance_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.patientname}}</td>
                                <td>{{ele.payername}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %} 
                </tbody>
            </table>
            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;insurance=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;insurance=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;insurance=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;insurance=1">100</a></li>
                </ul>
            </span>
        </div>

        <!-- Provider Information -->
        <div id="provider" class="tab-pane fade">
            <table  class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>Provider Name</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in provider_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.provider_name}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %} 
                </tbody>
            </table>
            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;insurance=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;insurance=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;insurance=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;insurance=1">100</a></li>
                </ul>
            </span>
        </div>

        <!-- Cpt Information -->
        <div id="cpt" class="tab-pane fade">
            <table  class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>CPT code</th>
                        <th>CPT description</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in cpt_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.cpt_code}}</td>
                                <td>{{ele.cpt_description}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %} 
                </tbody>
            </table>
            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;insurance=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;insurance=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;insurance=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;insurance=1">100</a></li>
                </ul>
            </span>
        </div>


        <!-- Dx Information -->
        <div id="dx" class="tab-pane fade">
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>ICD 10</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in dx_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.ICD_10}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %} 
                </tbody>
            </table>
            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;insurance=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;insurance=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;insurance=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;insurance=1">100</a></li>
                </ul>
            </span>
        </div>


        <!-- Referring provider Information -->
        <div id="rp" class="tab-pane fade">
            <table class="myTable table tablesorter">
                <thead class="thead-default" >
                    <tr>
                        <th>Row ID</th>
                        <th>Date/Time</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>What changed</th>
                        <th>Old Value</th>
                        <th>New Value</th>
                        <th>History id</th>
                        <th>Who changed?</th>
                        <th>History type</th>
                    </tr>
                </thead>
                <tbody>
                    {% with ":"|add:display_rows as iterable %}
                        {% for ele in referringprovider_info|slice:iterable %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{ele.history_date}}</td>
                                <td>{{ele.first_name}}</td>
                                <td>{{ele.last_name}}</td>
                                <td>{{ele.change}}</td>
                                <td>{{ele.oldvalue}}</td>
                                <td>{{ele.newvalue}}</td>
                                <td>{{ele.history_id}}</td>
                                <td>{{ele.history_user_id}}</td>
                                <td>{{ele.history_type|get_corresponding_text}}</td>
                            </tr>
                        {% endfor %}
                    {% endwith %} 
                </tbody>
            </table>
            <span class="btn-group dropup">
                <button type="button" class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
                    <span class="page-size">10</span> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li id="_5"><a href="?num=5&amp;insurance=1">5</a></li>
                    <li id="_10" ><a href="?num=10&amp;insurance=1">10 (default)</a></li>
                    <li id="_25" ><a href="?num=25&amp;insurance=1">25</a></li>
                    <li id="_100"><a href="?num=100&amp;insurance=1">100</a></li>
                </ul>
            </span>
        </div>

    </div>
</div>



{% endblock body %}

